<!DOCTYPE html>
<head>
<meta charset="utf-8" />
<title>QUIZ-Me</title>

<style>
b.r{color:rgba(255, 0, 51, 0.616);}
input[type=radio],input[type=checkbox],button,label{cursor:pointer;}
#test{border:peachpuff 10.5px solid;padding:10px 20px 20px 20px;}
#tt{padding:10.5px;}

</style>
</head>

<script>

var questions = [
	   [["Also known as the electromotive force.", "voltage", "current", "resistance"],"false",1],
	   [["The Higher the voltage the ______ the current.", "bigger", "none of the above", "lower"],"false",3],
	   [["_____ oppose the flow of current.", "current", "Resistance", "Voltages"],"false",2],
	   [["A particle travel along a straight line.", "Rectilinear", "Projectile", "Curvilinear"],"false",1],
	 
    ],
	to='',
	sec=10,
	A;

function _(x){return document.getElementById(x);}
function getRandomInt(min,max){return Math.floor(Math.random() * (max - min)) + min;}
function in_array(what,where){for(var i=0; i < where.length; i++)if(what == where[i])return true;return false;}

function ask(){
var len=questions.length;
if(len==1){
var answers=questions[0],
    a_len=answers.length,
	cor=0,
	incor=0,
	msg='';

for(var z=0; z < a_len; z++){
if(in_array('true',answers[z])){cor++;}
else{incor++;}
}

msg='You have given '+cor+' correct and '+incor+' incorrect answers for '+a_len+' questions Quiz.<br />';
_('test').innerHTML=msg;
if(_('nw').checked){
var win=window.open('','resultWin','width=500,height=500,top=0,left=0,statusbar=no,searchbar=no,titlebar=no,toolbar=no,location=no,scrollbars=no');
win.document.write('<center><div style="padding:150px 20px;">'+msg+'</div><a href="#null" onclick="window.close();">Close</a></center>');
win.focus();
win.moveBy((screen.width-500)/2,(screen.height-500)/3);
}
return;
}
else{
var answered=questions[1].length,/* how many questions already answered */
    temp=questions.slice(1),/* get a copy of questions w/o first element */
	total=answered + temp.length,/* how many questions in the Quiz */
	index=getRandomInt(0,temp.length),
    Q=A=temp[index],/* pick a random element from temp */
	Q_answer_index=Q[2], /* index of the correct answer */
	q_text=Q[0][0],/* question text */
	q_answers=Q[0].slice(1),/* possible answers */
	test=_('test'),
	i=0,/* counter */
	user_input='false';/* user answer */

test.innerHTML='<div>You have answered '+answered+' questions from '+total+'</div><h3>'+q_text+'</h3><div id="tt"></div>';

for(; i<q_answers.length; i++){
var val=(i+1==Q_answer_index) ? 'true' : 'false';
test.innerHTML+='<b>'+(i+1)+'.</b>&nbsp;<input type="radio" name="choices" value="'+val+'" title="'+val+'" />&nbsp;<i>'+q_answers[i]+'</i><br />';
}

test.innerHTML+='<br /><button>Submit Answer</button>';

var opts=test.querySelectorAll('[type="radio"]'),
    btn=test.querySelector('button');

for(var k=0; k<opts.length; k++){
opts[k].onchange=function(){user_input=this.value;}
}

btn.onclick=function(){
A[1]=user_input;
clearTimeout(to);
answer(index+1);
}

timer(sec,index+1);
}

}

function timer(val,ind){
var ending=(val > 1) ? 's' : '';
var txt='<b class="r">'+( val>9 ? val : ('0'+val) )+'</b> second'+ending+' left';
if(val > 0){
_('tt').innerHTML=txt;
val--;
to=setTimeout('timer('+val+','+ind+')',1000);
}
else{
_('tt').innerHTML='Time is up';
clearTimeout(to);
answer(ind);
return;
}
}

function answer(ind){
questions[0].push(A);
questions.splice(ind,1);
setTimeout('ask()',200);
}

onload=ask;
</script>

<body bgcolor="white" text="coral" align="center">

<div id="test"></div>
<label for="nw"><input type="checkbox" checked="checked" id="nw" />&nbsp;Show results in a new window</label>
</body>
</html>
